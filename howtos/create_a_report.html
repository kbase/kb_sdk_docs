<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating reports &mdash; KBase SDK 1.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=28f99aa0" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=6efca38a"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Adding UI Elements" href="add_ui_elements.html" />
    <link rel="prev" title="Common Questions" href="../references/questions_and_answers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            KBase SDK
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Concepts and Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video_tutorial.html">Video Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/1_dependencies.html">1. Dependencies &amp; Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/2_install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/3_initialize.html">3. Initialize the Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/4_helloworld.html">4. Hello World Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/5_setup.html">5. ContigFilter Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/6_inputsoutputs.html">6. Narrative User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/7_implement.html">7. Implement Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/8_publish.html">8. Publish and Update</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../references/questions_and_answers.html">Common Questions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_ui_elements.html">Adding UI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit_your_dockerfile.html">Editing your app’s Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="fill_out_app_information.html">Fully documenting your app</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_a_shell_command.html">Running shell commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_utils.html">Working with the file utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workspace.html">Using Workspace Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_build.html">Manually building the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="work_with_reference_data.html">Working with reference data</a></li>
<li class="toctree-l1"><a class="reference internal" href="job_manager.html">Listing and viewing jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_services.html">Dynamic Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="update_to_py3.html">Updating a module to Python3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References &amp; Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/design_checklist.html">Design Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/dev_guidelines.html">Developer Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/execution_engine.html">Job Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/module_anatomy.html">Anatomy of a Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/KIDL_spec.html">KIDL Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/UI_spec.html">Narrative App UI Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/terminology.html">Terminology</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KBase SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Creating reports</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/kbase/kb_sdk_docs/blob/blob/master/source/howtos/create_a_report.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="creating-reports">
<span id="id1"></span><h1>Creating reports<a class="headerlink" href="#creating-reports" title="Link to this heading"></a></h1>
<p>The <a href="https://appdev.kbase.us/#catalog/modules/KBaseReport" target="_blank">KBaseReport </a>
module allows the creation of KBase reports which can present text,
HTML, and downloadable files to the user as output to your app. The
KBaseReports module is the preferred way to communicate results to
users.</p>
<aside class="topic">
<p class="topic-title">Why do I need to make a report?</p>
<p>Reports in KBase allow a developer to present visualizations, generate
human-readable text strings, show warnings, provide links to output
files that do not correspond to typed objects, and in general display
information that is useful to a user without having to utilize kbase-ui
widgets.</p>
</aside>
<aside class="topic">
<p class="topic-title">What kinds of reports can I make?</p>
<p>Developers can use the KBaseReports module to display and contain a wide
variety of content. It’s up to each developer to determine how to
creatively and effectively integrate this module with their Apps.
Reports can be configured in a variety of ways, depending on how the
parameters to parse and display the outputs of an App are configured. We
will cover an example and some sample code, but exploring the variety of
existing Apps and their output reports within the KBase Narratives will
best demonstrate the capabilities of this module. Many developers have
used the ability to contain and display HTML files within the reports
for visualization of and interaction with data.</p>
</aside>
<aside class="topic">
<p class="topic-title">What do reports look like in KBase?</p>
<p>Reports are contained in the output cells generated by KBase Apps. A
typical and feature-rich example can be found in KBase’s implementation
of <a href="https://github.com/kbaseapps/kb_deseq/blob/add70f879a93f060c2b37de914dab7d0c02731c1/lib/kb_deseq/Utils/DESeqUtil.py#L241-L285" target="_blank">DESeq2 </a>.</p>
</aside>
<p>Sections of the report in the screenshot below have been outlined and labeled to show which parts of the report correspond to which parameters:</p>
<figure class="align-default">
<img alt="DESeq2 Report" src="../_images/DESeq2-Annotate.png" />
</figure>
<p>The first step in setting up KBase reports for an App is determining what the outputs of the program are in order to figure out how to best display results or give access to files to users. By understanding what kinds of files, HTML reports, warnings, and other outputs are generated by the program outside of KBase, you can develop a strategy for adequately representing all these within the output cell for your App.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># A working example of an app that generates a report for DESeq2</span>
<span class="c1"># https://github.com/kbaseapps/kb_deseq/blob/586714d/lib/kb_deseq/Utils/DESeqUtil.py#L241-L285</span>

<span class="n">report_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># message is an optional field.</span>
    <span class="c1"># A string that appears in the summary section of the result page</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="n">message_in_app</span><span class="p">,</span>

    <span class="c1"># A list of typed objects created during the execution</span>
    <span class="c1">#   of the App. This can only be used to refer to typed</span>
    <span class="c1">#   objects in the workspace and is separate from any files</span>
    <span class="c1">#   generated by the app.</span>
    <span class="c1"># See a working example here:</span>
    <span class="c1">#   https://github.com/kbaseapps/kb_deseq/blob/586714d/lib/kb_deseq/Utils/DESeqUtil.py#L262-L264</span>
    <span class="s1">&#39;objects_created&#39;</span><span class="p">:</span> <span class="n">objects_created_in_app</span><span class="p">,</span>

    <span class="c1"># A list of strings that can be used to alert the user</span>
    <span class="s1">&#39;warnings&#39;</span><span class="p">:</span> <span class="n">warnings_in_app</span><span class="p">,</span>

    <span class="c1"># The workspace name or ID is included in every report</span>
    <span class="s1">&#39;workspace_name&#39;</span><span class="p">:</span> <span class="n">ws_name</span><span class="p">,</span>

    <span class="c1"># A list of paths or Shock IDs pointing to</span>
    <span class="c1">#   a single flat file. They appear in Files section</span>
    <span class="c1">#   as list of downloadable files.</span>
    <span class="c1"># See a working example here:</span>
    <span class="c1">#   https://github.com/kbaseapps/kb_deseq/blob/586714d/lib/kb_deseq/Utils/DESeqUtil.py#L205-L239</span>
    <span class="s1">&#39;file_links&#39;</span><span class="p">:</span> <span class="n">output_files_in_app</span><span class="p">,</span>


    <span class="c1"># HTML files that appear in “Links”</span>
    <span class="c1">#   section. A list of paths or shock node</span>
    <span class="c1">#   IDs pointing to a single flat html file</span>
    <span class="c1">#   or to the top-level directory of a</span>
    <span class="c1">#   website. The report widget can render</span>
    <span class="c1">#   one html view directly. Set one of the</span>
    <span class="c1">#   following fields to decide which view to</span>
    <span class="c1">#   render:</span>
    <span class="c1">#     direct_html - A string with simple</span>
    <span class="c1">#       html text that will be rendered</span>
    <span class="c1">#       within the report widget:</span>
    <span class="c1">#     direct_html_link_index - Integer to</span>
    <span class="c1">#       specify the index of the page in</span>
    <span class="c1">#       html_links to view directly in the</span>
    <span class="c1">#       report widget</span>
    <span class="c1"># See a working example here:</span>
    <span class="c1"># https://github.com/kbaseapps/kb_deseq/blob/586714d/lib/kb_deseq/Utils/DESeqUtil.py#L86-L194</span>
    <span class="s1">&#39;html_links&#39;</span><span class="p">:</span> <span class="n">html_files_in_app</span><span class="p">,</span>
    <span class="s1">&#39;direct_html_link_index&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

    <span class="c1"># html_window_height : Window height - This sets the height</span>
    <span class="c1"># of the HTML window displayed under the “Reports” section.</span>
    <span class="c1"># The width is fixed.</span>
    <span class="s1">&#39;html_window_height&#39;</span><span class="p">:</span> <span class="mi">333</span><span class="p">,</span>
<span class="p">}</span> <span class="c1"># end of report_params</span>

<span class="c1"># Make the client, generate the report</span>

<span class="n">kbase_report_client</span> <span class="o">=</span> <span class="n">KBaseReport</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callback_url</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">kbase_report_client</span><span class="o">.</span><span class="n">create_extended_report</span><span class="p">(</span><span class="n">report_params</span><span class="p">)</span>

<span class="c1"># Return references which will allow inline display of</span>
<span class="c1"># the report in the Narrative</span>
<span class="n">report_output</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;report_name&#39;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                 <span class="s1">&#39;report_ref&#39;</span><span class="p">:</span> <span class="n">output</span><span class="p">[</span><span class="s1">&#39;ref&#39;</span><span class="p">]}</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../references/questions_and_answers.html" class="btn btn-neutral float-left" title="Common Questions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="add_ui_elements.html" class="btn btn-neutral float-right" title="Adding UI Elements" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, KBase.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>