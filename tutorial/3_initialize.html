<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Initialize the Module &mdash; KBase SDK 1.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=28f99aa0" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=6efca38a"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Hello World Example" href="4_helloworld.html" />
    <link rel="prev" title="2. Installation" href="2_install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            KBase SDK
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Concepts and Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video_tutorial.html">Video Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1_dependencies.html">1. Dependencies &amp; Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_install.html">2. Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Initialize the Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_helloworld.html">4. Hello World Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_setup.html">5. ContigFilter Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_inputsoutputs.html">6. Narrative User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_implement.html">7. Implement Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_publish.html">8. Publish and Update</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/questions_and_answers.html">Common Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/create_a_report.html">Creating reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/add_ui_elements.html">Adding UI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/edit_your_dockerfile.html">Editing your app’s Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/fill_out_app_information.html">Fully documenting your app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/run_a_shell_command.html">Running shell commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/file_utils.html">Working with the file utils</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howtos/workspace.html">Using Workspace Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/manual_build.html">Manually building the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/work_with_reference_data.html">Working with reference data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/job_manager.html">Listing and viewing jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/dynamic_services.html">Dynamic Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/update_to_py3.html">Updating a module to Python3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References &amp; Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/design_checklist.html">Design Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/dev_guidelines.html">Developer Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/execution_engine.html">Job Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/module_anatomy.html">Anatomy of a Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/KIDL_spec.html">KIDL Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/UI_spec.html">Narrative App UI Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/terminology.html">Terminology</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KBase SDK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">3. </span>Initialize the Module</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/kbase/kb_sdk_docs/blob/blob/master/source/tutorial/3_initialize.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="initialize-the-module">
<h1><span class="section-number">3. </span>Initialize the Module<a class="headerlink" href="#initialize-the-module" title="Link to this heading"></a></h1>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A KBase module contains all of the components for one or more apps. The components are all stored in
the same directory and are all uploaded to a single github repository. There are pros and cons to
bundling several apps in one module versus
creating one app per module. See <a href="../references/terminology.html">terminology</a> for more information.</p>
</div>
<p>The KBase SDK provides a way to quickly bootstrap a new module by generating most of the required components.</p>
<p>The basic options of the command are:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>kb-sdk<span class="w"> </span>init<span class="w"> </span><span class="o">[</span>--example<span class="o">]</span><span class="w"> </span><span class="o">[</span>--verbose<span class="o">]</span><span class="w"> </span><span class="o">[</span>--language<span class="w"> </span>language<span class="o">]</span><span class="w"> </span><span class="o">[</span>--user<span class="w"> </span>your_kbase_username<span class="o">]</span><span class="w"> </span>module_name
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">module_name</span></code> must be unique across all SDK modules registered in KBase. You’ll be using the bash variables
<code class="docutils literal notranslate"><span class="pre">your_kbase_username</span></code> and <code class="docutils literal notranslate"><span class="pre">username</span></code> multiple times in this tutorial, so for convenience, define these
variables: <code class="docutils literal notranslate"><span class="pre">your_kbase_username=jane.smith</span></code> and <code class="docutils literal notranslate"><span class="pre">username=${your_kbase_username}</span></code>. You’ll also be using the bash variable <code class="docutils literal notranslate"><span class="pre">module_name</span></code>
in this tutorial, but it will change depending on the different examples - first you can define it as <code class="docutils literal notranslate"><span class="pre">module_name=HelloWorld</span></code>.</p>
<p>Assuming the <code class="docutils literal notranslate"><span class="pre">your_kbase_username</span></code>, <code class="docutils literal notranslate"><span class="pre">username</span></code>, and <code class="docutils literal notranslate"><span class="pre">module_name</span></code> variables are defined, bootstrapping the HelloWorld module will start with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>kb-sdk<span class="w"> </span>init<span class="w"> </span>--language<span class="w"> </span>python<span class="w"> </span>--user<span class="w"> </span><span class="si">${</span><span class="nv">your_kbase_username</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">username</span><span class="si">}${</span><span class="nv">module_name</span><span class="si">}</span>
</pre></div>
</div>
<p>This creates a directory called <code class="docutils literal notranslate"><span class="pre">{username}HelloWorld</span></code> in your current directory where <code class="docutils literal notranslate"><span class="pre">{username}</span></code> is your name/id
that will make your copy of HelloWorld unique. The newly created directory has all of
the components needed to start creating apps and is basically a clean slate.</p>
<p>You must always include the <code class="docutils literal notranslate"><span class="pre">-u</span></code> or <code class="docutils literal notranslate"><span class="pre">-user</span></code> option with your username to set yourself as the module owner.</p>
<p>You can set your programming language to any of Python, Perl, or Java; for this tutorial, we’re using Python.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">kb-sdk</span> <span class="pre">init</span></code> options are:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-v,<span class="w"> </span>--verbose<span class="w">    </span>Show<span class="w"> </span>verbose<span class="w"> </span>output<span class="w"> </span>about<span class="w"> </span>which<span class="w"> </span>files<span class="w"> </span>and<span class="w"> </span>directories
<span class="w">                 </span>are<span class="w"> </span>being<span class="w"> </span>created.
-u<span class="w">  </span>--user<span class="w">       </span>Set<span class="w"> </span>the<span class="w"> </span>KBase<span class="w"> </span>username<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>first<span class="w"> </span>module<span class="w"> </span>owner
-e,<span class="w"> </span>--example<span class="w">    </span>Populate<span class="w"> </span>your<span class="w"> </span>repo<span class="w"> </span>with<span class="w"> </span>an<span class="w"> </span>example<span class="w"> </span>module<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>language
<span class="w">                 </span><span class="nb">set</span><span class="w"> </span>by<span class="w"> </span>-l
-l,<span class="w"> </span>--language<span class="w">   </span>Choose<span class="w"> </span>a<span class="w"> </span>programming<span class="w"> </span>language<span class="w"> </span>to<span class="w"> </span>base<span class="w"> </span>your<span class="w"> </span>repo<span class="w"> </span>on.
<span class="w">                 </span>Currently,<span class="w"> </span>we<span class="w"> </span>support<span class="w"> </span>Perl,<span class="w"> </span>Python,<span class="w"> </span>and<span class="w"> </span>Java.<span class="w"> </span>Default<span class="w"> </span>is
<span class="w">                 </span>Python
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Modules Cannot be Renamed (yet)</p>
<p>The <em>rename</em> feature of kb-sdk only does a partial rename. If you find you need to <em>rename</em>, it is easier
to start over with the ‘kb-sdk init’ and the new name. The ability to rename is on a list of planned
KBase improvements.</p>
</div>
<section id="build-the-module">
<h2><span class="section-number">3.1. </span>Build the Module<a class="headerlink" href="#build-the-module" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">username</span><span class="si">}${</span><span class="nv">module_name</span><span class="si">}</span>
$<span class="w"> </span>make
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">make</span></code> command will run some initial code generation.</p>
</section>
<section id="module-highlights">
<h2><span class="section-number">3.2. </span>Module Highlights<a class="headerlink" href="#module-highlights" title="Link to this heading"></a></h2>
<p>This module template has the following that you will customize in later steps:</p>
<ol class="arabic simple">
<li><p>A base directory called <code class="docutils literal notranslate"><span class="pre">{username}{module_name}</span></code> (see <a href="../references/module_anatomy.html">Anatomy of a Module </a> for more on the directory structure)</p></li>
<li><p>A description of the module, its version, and the authors in <code class="docutils literal notranslate"><span class="pre">kbase.yml</span></code></p></li>
<li><p>A specification file that defines the inputs, output, and functions for the module <code class="docutils literal notranslate"><span class="pre">{module_name}.spec</span></code>.</p></li>
<li><p>A script with code for running all the apps in the module called <code class="docutils literal notranslate"><span class="pre">lib/{username}{module_name}/{username}{module_name}Impl.py</span></code></p></li>
<li><p>Specifications for the user interface in the files <code class="docutils literal notranslate"><span class="pre">ui/narrative/methods/run_{username}{module_name}/spec.json</span></code> and <code class="docutils literal notranslate"><span class="pre">ui/narrative/methods/run_{username}{module_name}/display.yaml</span></code>.</p></li>
</ol>
<p>The input/output/function specification is written in an interface definition language <a href="../references/KIDL_spec.html">(IDL)</a>
that is specific to KBase. The kbase.yml and display.yaml are in
YAML format - <a class="reference external" href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html">https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html</a>. YAML format checkers are available online.
The spec.json is in JSON format - <a class="reference external" href="https://www.w3schools.com/js/js_json_syntax.asp">https://www.w3schools.com/js/js_json_syntax.asp</a>. JSON format checkers are available online.</p>
<p>Don’t worry about the location of these files; this will be discussed in more detail later in the tutorial.</p>
</section>
<section id="create-a-github-repo">
<h2><span class="section-number">3.3. </span>Create a GitHub Repo<a class="headerlink" href="#create-a-github-repo" title="Link to this heading"></a></h2>
<p>You will need to publish your code to a public git repository to make it available for building into a custom
Docker Image.  Here we’ll show a brief example using GitHub.  If following the tutorial step-by-step, you should
already be working in the correct directory (i.e. the same directory as where you ran the <code class="docutils literal notranslate"><span class="pre">make</span></code> command).
First, commit your codebase into a local git repository. Then, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> all files created by kb-sdk and commit.
This creates a git repository locally. Also, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">'Initial</span> <span class="pre">commit'</span></code> to write a message describing this
first commit.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">username</span><span class="si">}${</span><span class="nv">module_name</span><span class="si">}</span><span class="w"> </span><span class="c1">#only needed if not already in the correct location</span>
$<span class="w"> </span>git<span class="w"> </span>init
$<span class="w"> </span>git<span class="w"> </span>add<span class="w"> </span>.
$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s1">&#39;Initial commit&#39;</span>
</pre></div>
</div>
<p>Now, create a new GitHub repository on github.com (it can be in your personal GitHub account or in an organization,
but it must be public). As above, for convenience define <code class="docutils literal notranslate"><span class="pre">github_user_name</span></code> as a bash variable, for example
<code class="docutils literal notranslate"><span class="pre">github_user_name=jsmith10</span></code>. Make sure your github repository is initially empty (don’t add an initial README.md).</p>
<ul class="simple">
<li><p>Direct link to create a repo on github.  <a href="https://github.com/new" target="_blank">https://github.com/new</a>.</p></li>
<li><p>Github documentation about creating repos: <a href="https://help.github.com/articles/creating-a-new-repository" target="_blank">https://help.github.com/articles/creating-a-new-repository</a>.</p></li>
</ul>
<p>Sync your local codebase to your repository on github:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span>https://github.com/<span class="si">${</span><span class="nv">github_user_name</span><span class="si">}</span>/<span class="si">${</span><span class="nv">username</span><span class="si">}${</span><span class="nv">module_name</span><span class="si">}</span>.git
$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>-u<span class="w"> </span>origin<span class="w"> </span>master
</pre></div>
</div>
<p>Remember to continuously push your code changes to your github repo by using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>.</p>
</section>
<section id="set-up-your-developer-credentials">
<h2><span class="section-number">3.4. </span>Set up your developer credentials<a class="headerlink" href="#set-up-your-developer-credentials" title="Link to this heading"></a></h2>
<p>If you want, this step can wait until you want to test your module.
However, it is somewhat disruptive to the thought process if you wait until later.
This step can be done any time after the first <code class="docutils literal notranslate"><span class="pre">make</span></code> of a module.</p>
<p>The KBase file storage services require authenticated access. During development a dev <code class="docutils literal notranslate"><span class="pre">token</span></code> is generated
and used instead of putting user IDs and passwords in clear text in your module.
Tokens are good for 90 days and can be used on all modules developed and tested during the 90 days.</p>
<p>Go to <a href="https://narrative.kbase.us/#auth2/account" target="_blank">https://narrative.kbase.us/#auth2/account</a>, click <strong>Developer Tokens</strong>, and generate a new token. The
token is only visible on the screen for 5 minutes so make sure you are ready to do the step below.</p>
<p>From the module’s root directory, copy and paste that token into <code class="docutils literal notranslate"><span class="pre">test_local/test.cfg</span></code> in the value
for <code class="docutils literal notranslate"><span class="pre">test_token</span></code>. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">test_token</span><span class="o">=</span>JQGGVCPKCAB2XYHRHZV4H3NF4TN3YEUSA
</pre></div>
</div>
<p>Where you substitute your own test_token. The above listed token is unauthorized.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="2_install.html" class="btn btn-neutral float-left" title="2. Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="4_helloworld.html" class="btn btn-neutral float-right" title="4. Hello World Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, KBase.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>